package ${other.getPackages()}.controller;

import ${other.getPackages()}.pojo.${other.getTableNameJava()?cap_first};
import ${other.getPackages()}.service. ${other.getTableNameJava()?cap_first}Service;
import ${other.getPackages()}.common.ApiResult;
import ${other.getPackages()}.common.PageQueryBean;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * Created on ${other.getTime()}.
 */

@RestController
@RequestMapping("/api/${other.getTableNameJava()}")
public class ${other.getTableNameJava()?cap_first}Controller{

    @Autowired
    public ${other.getTableNameJava()?cap_first}Service ${other.getTableNameJava()}Service;

    /**
     * 添加
     */
    @RequestMapping("/createOrUpdate")
    public ApiResult insert(@RequestBody ${other.getTableNameJava()?cap_first} ${other.getTableNameJava()}) {
        if(${other.getTableNameJava()}.getId()!=null){
            ${other.getTableNameJava()}Service.insert(${other.getTableNameJava()});
        } else {
            ${other.getTableNameJava()}Service.update(${other.getTableNameJava()});
        }
        return ApiResult.success();
    }

    /**
     * 删除
     */
    @RequestMapping("/delete")
    public ApiResult delete(@RequestBody Long[] ids) {
        ${other.getTableNameJava()}Service.deleteByIds(ids);
        return ApiResult.success();
    }

    /**
     * 查询
     */
    @RequestMapping("/search")
    public ApiResult<PageQueryBean<${other.getTableNameJava()?cap_first}>> search(@RequestBody ${other.getTableNameJava()?cap_first} ${other.getTableNameJava()}) {
        return ApiResult.success(${other.getTableNameJava()}Service.search(${other.getTableNameJava()}));
    }

    /**
     * 根据ID查询
     */
    @RequestMapping("/findById")
    public ApiResult findById(@RequestBody Long id) {
        return ApiResult.success(${other.getTableNameJava()}Service.findById(id));
    }
}